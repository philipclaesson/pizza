(()=>{"use strict";const t={pizzas:6,ingredients:{flour:{amount:1e3,unit:"g",alternativeAmount:16.6,alternativeUnit:"dl"},water:{amount:7,unit:"dl",alternativeAmount:700,alternativeUnit:"g"},yeast:{amount:6,unit:"g",alternativeAmount:2.5,alternativeUnit:"ml"},salt:{amount:5,unit:"tsp",alternativeAmount:30,alternativeUnit:"g"}}},n={flour:!1,water:!1,yeast:!1,salt:!1};function e(t){return Math.round(2*t)/2}function a(t){return 10*Math.round(t/10)}function i(t,e){return n[e]&&t.alternativeAmount&&t.alternativeUnit?`${t.alternativeAmount} ${t.alternativeUnit}`:`${t.amount} ${t.unit}`}function o(){const n=document.getElementById("pizza-slider"),o=parseInt(n.value),u=document.getElementById("title");if(u){const t=1===o?"PIZZA":"PIZZE";u.textContent=`${o} ${t}`}const r=function(n){const i=n/t.pizzas,o={};for(const[n,r]of Object.entries(t.ingredients)){const t=r.amount*i;if("tsp"===r.unit){const a=(u=t)>=3?{amount:e(u/3),unit:"tbsp"}:{amount:e(u),unit:"tsp"};o[n]={amount:a.amount,unit:a.unit}}else o[n]=t>100?{amount:a(t),unit:r.unit}:t>10?{amount:Math.round(t),unit:r.unit}:{amount:e(t),unit:r.unit};if("alternativeAmount"in r&&"alternativeUnit"in r&&void 0!==r.alternativeAmount&&void 0!==r.alternativeUnit){const t=r.alternativeAmount*i;"g"===r.alternativeUnit?o[n].alternativeAmount=a(t):o[n].alternativeAmount=e(t),o[n].alternativeUnit=r.alternativeUnit}}var u;return{pizzas:n,ingredients:o}}(o),l=document.getElementById("flour-amount"),s=document.getElementById("water-amount"),d=document.getElementById("yeast-amount"),m=document.getElementById("salt-amount");l&&(l.textContent=i(r.ingredients.flour,"flour")),s&&(s.textContent=i(r.ingredients.water,"water")),d&&(d.textContent=i(r.ingredients.yeast,"yeast")),m&&(m.textContent=i(r.ingredients.salt,"salt"))}document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("pizza-slider");t&&(t.value="6",t.addEventListener("input",o),o(),document.querySelectorAll(".ingredient-item").forEach(((t,e)=>{const a=["flour","water","yeast","salt"][e];t.addEventListener("click",(()=>{!function(t){n[t]=!n[t],o()}(a)})),t.addEventListener("mouseenter",(()=>{t.classList.add("ingredient-hover")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("ingredient-hover")}))})))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxNQUFNQSxFQUFjLENBQ2xCQyxPQUFRLEVBQ1JDLFlBQWEsQ0FDWEMsTUFBTyxDQUNMQyxPQUFRLElBQ1JDLEtBQU0sSUFDTkMsa0JBQW1CLEtBQ25CQyxnQkFBaUIsTUFFbkJDLE1BQU8sQ0FDTEosT0FBUSxFQUNSQyxLQUFNLEtBQ05DLGtCQUFtQixJQUNuQkMsZ0JBQWlCLEtBRW5CRSxNQUFPLENBQ0xMLE9BQVEsRUFDUkMsS0FBTSxJQUNOQyxrQkFBbUIsSUFDbkJDLGdCQUFpQixNQUVuQkcsS0FBTSxDQUNKTixPQUFRLEVBQ1JDLEtBQU0sTUFDTkMsa0JBQW1CLEdBQ25CQyxnQkFBaUIsT0FvQmpCSSxFQUFvRCxDQUN4RFIsT0FBTyxFQUNQSyxPQUFPLEVBQ1BDLE9BQU8sRUFDUEMsTUFBTSxHQUlSLFNBQVNFLEVBQW1CQyxHQUMxQixPQUFPQyxLQUFLQyxNQUFjLEVBQVJGLEdBQWEsQ0FDakMsQ0FFQSxTQUFTRyxFQUFpQkgsR0FDeEIsT0FBZ0MsR0FBekJDLEtBQUtDLE1BQU1GLEVBQVEsR0FDNUIsQ0FxRUEsU0FBU0ksRUFDUEMsRUFDQUMsR0FJQSxPQUZ3QlIsRUFBc0JRLElBSTVDRCxFQUFXWixtQkFDWFksRUFBV1gsZ0JBRUosR0FBR1csRUFBV1oscUJBQXFCWSxFQUFXWCxrQkFHaEQsR0FBR1csRUFBV2QsVUFBVWMsRUFBV2IsTUFDNUMsQ0FTQSxTQUFTZSxJQUNQLE1BQU1DLEVBQVNDLFNBQVNDLGVBQWUsZ0JBQ2pDQyxFQUFhQyxTQUFTSixFQUFPUixPQUc3QmEsRUFBZUosU0FBU0MsZUFBZSxTQUM3QyxHQUFJRyxFQUFjLENBQ2hCLE1BQU1DLEVBQTJCLElBQWZILEVBQW1CLFFBQVUsUUFDL0NFLEVBQWFFLFlBQWMsR0FBR0osS0FBY0csRyxDQUk5QyxNQUFNRSxFQTdGUixTQUE4QkMsR0FDNUIsTUFBTUMsRUFBYUQsRUFBZTlCLEVBQVlDLE9BQ3hDK0IsRUFBdUQsQ0FBQyxFQUU5RCxJQUFLLE1BQU9DLEVBQUtmLEtBQWVnQixPQUFPQyxRQUFRbkMsRUFBWUUsYUFBYyxDQUN2RSxNQUFNa0MsRUFBZWxCLEVBQVdkLE9BQVMyQixFQUV6QyxHQUF3QixRQUFwQmIsRUFBV2IsS0FBZ0IsQ0FDN0IsTUFBTWdDLEdBakJjakMsRUFpQmVnQyxJQWhCekIsRUFFTCxDQUFFaEMsT0FBUVEsRUFESlIsRUFBUyxHQUNxQkMsS0FBTSxRQUU1QyxDQUFFRCxPQUFRUSxFQUFtQlIsR0FBU0MsS0FBTSxPQWEvQzJCLEVBQXNCQyxHQUFPLENBQzNCN0IsT0FBUWlDLEVBQVVqQyxPQUNsQkMsS0FBTWdDLEVBQVVoQyxLLE1BR2xCMkIsRUFBc0JDLEdBRGJHLEVBQWUsSUFDSyxDQUMzQmhDLE9BQVFZLEVBQWlCb0IsR0FDekIvQixLQUFNYSxFQUFXYixNQUVWK0IsRUFBZSxHQUNLLENBQzNCaEMsT0FBUVUsS0FBS0MsTUFBTXFCLEdBQ25CL0IsS0FBTWEsRUFBV2IsTUFHVSxDQUMzQkQsT0FBUVEsRUFBbUJ3QixHQUMzQi9CLEtBQU1hLEVBQVdiLE1BS3JCLEdBQ0Usc0JBQXVCYSxHQUN2QixvQkFBcUJBLFFBQ1lvQixJQUFqQ3BCLEVBQVdaLHdCQUNvQmdDLElBQS9CcEIsRUFBV1gsZ0JBQ1gsQ0FDQSxNQUFNZ0MsRUFBa0JyQixFQUFXWixrQkFBb0J5QixFQUVwQixNQUEvQmIsRUFBV1gsZ0JBQ2J5QixFQUFzQkMsR0FBSzNCLGtCQUN6QlUsRUFBaUJ1QixHQUVuQlAsRUFBc0JDLEdBQUszQixrQkFDekJNLEVBQW1CMkIsR0FFdkJQLEVBQXNCQyxHQUFLMUIsZ0JBQWtCVyxFQUFXWCxlLEVBdkQ5RCxJQUEwQkgsRUEyRHhCLE1BQU8sQ0FDTEgsT0FBUTZCLEVBQ1I1QixZQUFhOEIsRUFFakIsQ0F1Q2lCUSxDQUFxQmhCLEdBRzlCaUIsRUFBZW5CLFNBQVNDLGVBQWUsZ0JBQ3ZDbUIsRUFBZXBCLFNBQVNDLGVBQWUsZ0JBQ3ZDb0IsRUFBZXJCLFNBQVNDLGVBQWUsZ0JBQ3ZDcUIsRUFBY3RCLFNBQVNDLGVBQWUsZUFFeENrQixJQUNGQSxFQUFhYixZQUFjWCxFQUN6QlksRUFBTzNCLFlBQVlDLE1BQ25CLFVBRUF1QyxJQUNGQSxFQUFhZCxZQUFjWCxFQUN6QlksRUFBTzNCLFlBQVlNLE1BQ25CLFVBRUFtQyxJQUNGQSxFQUFhZixZQUFjWCxFQUN6QlksRUFBTzNCLFlBQVlPLE1BQ25CLFVBRUFtQyxJQUNGQSxFQUFZaEIsWUFBY1gsRUFBaUJZLEVBQU8zQixZQUFZUSxLQUFNLFFBQ3hFLENBMEJBWSxTQUFTdUIsaUJBQWlCLG9CQUFvQixLQUM1QyxNQUFNeEIsRUFBU0MsU0FBU0MsZUFBZSxnQkFFbkNGLElBRUZBLEVBQU9SLE1BQVEsSUFHZlEsRUFBT3dCLGlCQUFpQixRQUFTekIsR0FHakNBLElBakNzQkUsU0FBU3dCLGlCQUFpQixvQkFFbENDLFNBQVEsQ0FBQ0MsRUFBTUMsS0FDN0IsTUFDTTlCLEVBRGlCLENBQUMsUUFBUyxRQUFTLFFBQVMsUUFDZDhCLEdBRXJDRCxFQUFLSCxpQkFBaUIsU0FBUyxNQXJEbkMsU0FBMEIxQixHQUN4QlIsRUFBc0JRLElBQWtCUixFQUFzQlEsR0FDOURDLEdBQ0YsQ0FtRE04QixDQUFpQi9CLEVBQWMsSUFJakM2QixFQUFLSCxpQkFBaUIsY0FBYyxLQUNsQ0csRUFBS0csVUFBVUMsSUFBSSxtQkFBbUIsSUFHeENKLEVBQUtILGlCQUFpQixjQUFjLEtBQ2xDRyxFQUFLRyxVQUFVRSxPQUFPLG1CQUFtQixHQUN6QyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGl6emEvLi9zcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCYXNlIHJlY2lwZSBmb3IgNiBwaXp6YXNcbmNvbnN0IEJBU0VfUkVDSVBFID0ge1xuICBwaXp6YXM6IDYsXG4gIGluZ3JlZGllbnRzOiB7XG4gICAgZmxvdXI6IHtcbiAgICAgIGFtb3VudDogMTAwMCxcbiAgICAgIHVuaXQ6IFwiZ1wiLFxuICAgICAgYWx0ZXJuYXRpdmVBbW91bnQ6IDE2LjYsXG4gICAgICBhbHRlcm5hdGl2ZVVuaXQ6IFwiZGxcIixcbiAgICB9LFxuICAgIHdhdGVyOiB7XG4gICAgICBhbW91bnQ6IDcsXG4gICAgICB1bml0OiBcImRsXCIsXG4gICAgICBhbHRlcm5hdGl2ZUFtb3VudDogNzAwLFxuICAgICAgYWx0ZXJuYXRpdmVVbml0OiBcImdcIixcbiAgICB9LFxuICAgIHllYXN0OiB7XG4gICAgICBhbW91bnQ6IDYsXG4gICAgICB1bml0OiBcImdcIixcbiAgICAgIGFsdGVybmF0aXZlQW1vdW50OiAyLjUsXG4gICAgICBhbHRlcm5hdGl2ZVVuaXQ6IFwibWxcIixcbiAgICB9LFxuICAgIHNhbHQ6IHtcbiAgICAgIGFtb3VudDogNSxcbiAgICAgIHVuaXQ6IFwidHNwXCIsXG4gICAgICBhbHRlcm5hdGl2ZUFtb3VudDogMzAsXG4gICAgICBhbHRlcm5hdGl2ZVVuaXQ6IFwiZ1wiLFxuICAgIH0sXG4gIH0sXG59O1xuXG5pbnRlcmZhY2UgSW5ncmVkaWVudCB7XG4gIGFtb3VudDogbnVtYmVyO1xuICB1bml0OiBzdHJpbmc7XG4gIGFsdGVybmF0aXZlQW1vdW50PzogbnVtYmVyO1xuICBhbHRlcm5hdGl2ZVVuaXQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBSZWNpcGUge1xuICBwaXp6YXM6IG51bWJlcjtcbiAgaW5ncmVkaWVudHM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBJbmdyZWRpZW50O1xuICB9O1xufVxuXG4vLyBUcmFjayB3aGljaCBpbmdyZWRpZW50cyBhcmUgc2hvd2luZyBhbHRlcm5hdGl2ZSBhbW91bnRzXG5jb25zdCBpbmdyZWRpZW50VG9nZ2xlU3RhdGU6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge1xuICBmbG91cjogZmFsc2UsXG4gIHdhdGVyOiBmYWxzZSxcbiAgeWVhc3Q6IGZhbHNlLFxuICBzYWx0OiBmYWxzZSxcbn07XG5cbi8vIFJvdW5kIHRvIG5lYXJlc3QgMC41XG5mdW5jdGlvbiByb3VuZFRvTmVhcmVzdEhhbGYodmFsdWU6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogMikgLyAyO1xufVxuXG5mdW5jdGlvbiByb3VuZFRvTmVhcmVzdDEwKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIDEwKSAqIDEwO1xufVxuXG4vLyBDb252ZXJ0IHRlYXNwb29ucyB0byB0YWJsZXNwb29ucyBpZiA+PSAzIHRzcFxuZnVuY3Rpb24gY29udmVydFRzcFRvVGJzcChhbW91bnQ6IG51bWJlcik6IHsgYW1vdW50OiBudW1iZXI7IHVuaXQ6IHN0cmluZyB9IHtcbiAgaWYgKGFtb3VudCA+PSAzKSB7XG4gICAgY29uc3QgdGJzcCA9IGFtb3VudCAvIDM7XG4gICAgcmV0dXJuIHsgYW1vdW50OiByb3VuZFRvTmVhcmVzdEhhbGYodGJzcCksIHVuaXQ6IFwidGJzcFwiIH07XG4gIH1cbiAgcmV0dXJuIHsgYW1vdW50OiByb3VuZFRvTmVhcmVzdEhhbGYoYW1vdW50KSwgdW5pdDogXCJ0c3BcIiB9O1xufVxuXG4vLyBDYWxjdWxhdGUgaW5ncmVkaWVudHMgZm9yIGRlc2lyZWQgbnVtYmVyIG9mIHBpenphc1xuZnVuY3Rpb24gY2FsY3VsYXRlSW5ncmVkaWVudHModGFyZ2V0UGl6emFzOiBudW1iZXIpOiBSZWNpcGUge1xuICBjb25zdCBtdWx0aXBsaWVyID0gdGFyZ2V0UGl6emFzIC8gQkFTRV9SRUNJUEUucGl6emFzO1xuICBjb25zdCBjYWxjdWxhdGVkSW5ncmVkaWVudHM6IHsgW2tleTogc3RyaW5nXTogSW5ncmVkaWVudCB9ID0ge307XG5cbiAgZm9yIChjb25zdCBba2V5LCBpbmdyZWRpZW50XSBvZiBPYmplY3QuZW50cmllcyhCQVNFX1JFQ0lQRS5pbmdyZWRpZW50cykpIHtcbiAgICBjb25zdCBzY2FsZWRBbW91bnQgPSBpbmdyZWRpZW50LmFtb3VudCAqIG11bHRpcGxpZXI7XG5cbiAgICBpZiAoaW5ncmVkaWVudC51bml0ID09PSBcInRzcFwiKSB7XG4gICAgICBjb25zdCBjb252ZXJ0ZWQgPSBjb252ZXJ0VHNwVG9UYnNwKHNjYWxlZEFtb3VudCk7XG4gICAgICBjYWxjdWxhdGVkSW5ncmVkaWVudHNba2V5XSA9IHtcbiAgICAgICAgYW1vdW50OiBjb252ZXJ0ZWQuYW1vdW50LFxuICAgICAgICB1bml0OiBjb252ZXJ0ZWQudW5pdCxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChzY2FsZWRBbW91bnQgPiAxMDApIHtcbiAgICAgIGNhbGN1bGF0ZWRJbmdyZWRpZW50c1trZXldID0ge1xuICAgICAgICBhbW91bnQ6IHJvdW5kVG9OZWFyZXN0MTAoc2NhbGVkQW1vdW50KSxcbiAgICAgICAgdW5pdDogaW5ncmVkaWVudC51bml0LFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHNjYWxlZEFtb3VudCA+IDEwKSB7XG4gICAgICBjYWxjdWxhdGVkSW5ncmVkaWVudHNba2V5XSA9IHtcbiAgICAgICAgYW1vdW50OiBNYXRoLnJvdW5kKHNjYWxlZEFtb3VudCksXG4gICAgICAgIHVuaXQ6IGluZ3JlZGllbnQudW5pdCxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGN1bGF0ZWRJbmdyZWRpZW50c1trZXldID0ge1xuICAgICAgICBhbW91bnQ6IHJvdW5kVG9OZWFyZXN0SGFsZihzY2FsZWRBbW91bnQpLFxuICAgICAgICB1bml0OiBpbmdyZWRpZW50LnVuaXQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFByZXNlcnZlIGFsdGVybmF0aXZlIG1lYXN1cmVtZW50cyBpZiB0aGV5IGV4aXN0XG4gICAgaWYgKFxuICAgICAgXCJhbHRlcm5hdGl2ZUFtb3VudFwiIGluIGluZ3JlZGllbnQgJiZcbiAgICAgIFwiYWx0ZXJuYXRpdmVVbml0XCIgaW4gaW5ncmVkaWVudCAmJlxuICAgICAgaW5ncmVkaWVudC5hbHRlcm5hdGl2ZUFtb3VudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBpbmdyZWRpZW50LmFsdGVybmF0aXZlVW5pdCAhPT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICBjb25zdCBzY2FsZWRBbHRBbW91bnQgPSBpbmdyZWRpZW50LmFsdGVybmF0aXZlQW1vdW50ICogbXVsdGlwbGllcjtcblxuICAgICAgaWYgKGluZ3JlZGllbnQuYWx0ZXJuYXRpdmVVbml0ID09PSBcImdcIikge1xuICAgICAgICBjYWxjdWxhdGVkSW5ncmVkaWVudHNba2V5XS5hbHRlcm5hdGl2ZUFtb3VudCA9XG4gICAgICAgICAgcm91bmRUb05lYXJlc3QxMChzY2FsZWRBbHRBbW91bnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsY3VsYXRlZEluZ3JlZGllbnRzW2tleV0uYWx0ZXJuYXRpdmVBbW91bnQgPVxuICAgICAgICAgIHJvdW5kVG9OZWFyZXN0SGFsZihzY2FsZWRBbHRBbW91bnQpO1xuICAgICAgfVxuICAgICAgY2FsY3VsYXRlZEluZ3JlZGllbnRzW2tleV0uYWx0ZXJuYXRpdmVVbml0ID0gaW5ncmVkaWVudC5hbHRlcm5hdGl2ZVVuaXQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwaXp6YXM6IHRhcmdldFBpenphcyxcbiAgICBpbmdyZWRpZW50czogY2FsY3VsYXRlZEluZ3JlZGllbnRzLFxuICB9O1xufVxuXG4vLyBGb3JtYXQgaW5ncmVkaWVudCBkaXNwbGF5IGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZVxuZnVuY3Rpb24gZm9ybWF0SW5ncmVkaWVudChcbiAgaW5ncmVkaWVudDogSW5ncmVkaWVudCxcbiAgaW5ncmVkaWVudEtleTogc3RyaW5nXG4pOiBzdHJpbmcge1xuICBjb25zdCBzaG93QWx0ZXJuYXRpdmUgPSBpbmdyZWRpZW50VG9nZ2xlU3RhdGVbaW5ncmVkaWVudEtleV07XG5cbiAgaWYgKFxuICAgIHNob3dBbHRlcm5hdGl2ZSAmJlxuICAgIGluZ3JlZGllbnQuYWx0ZXJuYXRpdmVBbW91bnQgJiZcbiAgICBpbmdyZWRpZW50LmFsdGVybmF0aXZlVW5pdFxuICApIHtcbiAgICByZXR1cm4gYCR7aW5ncmVkaWVudC5hbHRlcm5hdGl2ZUFtb3VudH0gJHtpbmdyZWRpZW50LmFsdGVybmF0aXZlVW5pdH1gO1xuICB9XG5cbiAgcmV0dXJuIGAke2luZ3JlZGllbnQuYW1vdW50fSAke2luZ3JlZGllbnQudW5pdH1gO1xufVxuXG4vLyBUb2dnbGUgaW5ncmVkaWVudCBkaXNwbGF5IGJldHdlZW4gbWFpbiBhbmQgYWx0ZXJuYXRpdmUgYW1vdW50c1xuZnVuY3Rpb24gdG9nZ2xlSW5ncmVkaWVudChpbmdyZWRpZW50S2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgaW5ncmVkaWVudFRvZ2dsZVN0YXRlW2luZ3JlZGllbnRLZXldID0gIWluZ3JlZGllbnRUb2dnbGVTdGF0ZVtpbmdyZWRpZW50S2V5XTtcbiAgdXBkYXRlUmVjaXBlRGlzcGxheSgpO1xufVxuXG4vLyBVcGRhdGUgdGhlIHJlY2lwZSBkaXNwbGF5XG5mdW5jdGlvbiB1cGRhdGVSZWNpcGVEaXNwbGF5KCk6IHZvaWQge1xuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpenphLXNsaWRlclwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICBjb25zdCBwaXp6YUNvdW50ID0gcGFyc2VJbnQoc2xpZGVyLnZhbHVlKTtcblxuICAvLyBVcGRhdGUgdGl0bGUgd2l0aCBwaXp6YSBjb3VudFxuICBjb25zdCB0aXRsZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpO1xuICBpZiAodGl0bGVEaXNwbGF5KSB7XG4gICAgY29uc3QgcGl6emFUZXh0ID0gcGl6emFDb3VudCA9PT0gMSA/IFwiUElaWkFcIiA6IFwiUElaWkVcIjtcbiAgICB0aXRsZURpc3BsYXkudGV4dENvbnRlbnQgPSBgJHtwaXp6YUNvdW50fSAke3BpenphVGV4dH1gO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIG5ldyByZWNpcGVcbiAgY29uc3QgcmVjaXBlID0gY2FsY3VsYXRlSW5ncmVkaWVudHMocGl6emFDb3VudCk7XG5cbiAgLy8gVXBkYXRlIGluZ3JlZGllbnQgZGlzcGxheXNcbiAgY29uc3QgZmxvdXJEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmbG91ci1hbW91bnRcIik7XG4gIGNvbnN0IHdhdGVyRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2F0ZXItYW1vdW50XCIpO1xuICBjb25zdCB5ZWFzdERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInllYXN0LWFtb3VudFwiKTtcbiAgY29uc3Qgc2FsdERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbHQtYW1vdW50XCIpO1xuXG4gIGlmIChmbG91ckRpc3BsYXkpXG4gICAgZmxvdXJEaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0SW5ncmVkaWVudChcbiAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy5mbG91cixcbiAgICAgIFwiZmxvdXJcIlxuICAgICk7XG4gIGlmICh3YXRlckRpc3BsYXkpXG4gICAgd2F0ZXJEaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0SW5ncmVkaWVudChcbiAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy53YXRlcixcbiAgICAgIFwid2F0ZXJcIlxuICAgICk7XG4gIGlmICh5ZWFzdERpc3BsYXkpXG4gICAgeWVhc3REaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0SW5ncmVkaWVudChcbiAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy55ZWFzdCxcbiAgICAgIFwieWVhc3RcIlxuICAgICk7XG4gIGlmIChzYWx0RGlzcGxheSlcbiAgICBzYWx0RGlzcGxheS50ZXh0Q29udGVudCA9IGZvcm1hdEluZ3JlZGllbnQocmVjaXBlLmluZ3JlZGllbnRzLnNhbHQsIFwic2FsdFwiKTtcbn1cblxuLy8gQWRkIGNsaWNrIGhhbmRsZXJzIGZvciBpbmdyZWRpZW50IGl0ZW1zXG5mdW5jdGlvbiBhZGRJbmdyZWRpZW50Q2xpY2tIYW5kbGVycygpOiB2b2lkIHtcbiAgY29uc3QgaW5ncmVkaWVudEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbmdyZWRpZW50LWl0ZW1cIik7XG5cbiAgaW5ncmVkaWVudEl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgY29uc3QgaW5ncmVkaWVudEtleXMgPSBbXCJmbG91clwiLCBcIndhdGVyXCIsIFwieWVhc3RcIiwgXCJzYWx0XCJdO1xuICAgIGNvbnN0IGluZ3JlZGllbnRLZXkgPSBpbmdyZWRpZW50S2V5c1tpbmRleF07XG5cbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0b2dnbGVJbmdyZWRpZW50KGluZ3JlZGllbnRLZXkpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIHZpc3VhbCBmZWVkYmFja1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiaW5ncmVkaWVudC1ob3ZlclwiKTtcbiAgICB9KTtcblxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5ncmVkaWVudC1ob3ZlclwiKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIEluaXRpYWxpemUgdGhlIGNhbGN1bGF0b3JcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXp6YS1zbGlkZXJcIikgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICBpZiAoc2xpZGVyKSB7XG4gICAgLy8gU2V0IGRlZmF1bHQgdmFsdWVcbiAgICBzbGlkZXIudmFsdWUgPSBcIjZcIjtcblxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3Igc2xpZGVyIGNoYW5nZXNcbiAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHVwZGF0ZVJlY2lwZURpc3BsYXkpO1xuXG4gICAgLy8gSW5pdGlhbCBkaXNwbGF5IHVwZGF0ZVxuICAgIHVwZGF0ZVJlY2lwZURpc3BsYXkoKTtcblxuICAgIC8vIEFkZCBjbGljayBoYW5kbGVycyBmb3IgaW5ncmVkaWVudHNcbiAgICBhZGRJbmdyZWRpZW50Q2xpY2tIYW5kbGVycygpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6WyJCQVNFX1JFQ0lQRSIsInBpenphcyIsImluZ3JlZGllbnRzIiwiZmxvdXIiLCJhbW91bnQiLCJ1bml0IiwiYWx0ZXJuYXRpdmVBbW91bnQiLCJhbHRlcm5hdGl2ZVVuaXQiLCJ3YXRlciIsInllYXN0Iiwic2FsdCIsImluZ3JlZGllbnRUb2dnbGVTdGF0ZSIsInJvdW5kVG9OZWFyZXN0SGFsZiIsInZhbHVlIiwiTWF0aCIsInJvdW5kIiwicm91bmRUb05lYXJlc3QxMCIsImZvcm1hdEluZ3JlZGllbnQiLCJpbmdyZWRpZW50IiwiaW5ncmVkaWVudEtleSIsInVwZGF0ZVJlY2lwZURpc3BsYXkiLCJzbGlkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicGl6emFDb3VudCIsInBhcnNlSW50IiwidGl0bGVEaXNwbGF5IiwicGl6emFUZXh0IiwidGV4dENvbnRlbnQiLCJyZWNpcGUiLCJ0YXJnZXRQaXp6YXMiLCJtdWx0aXBsaWVyIiwiY2FsY3VsYXRlZEluZ3JlZGllbnRzIiwia2V5IiwiT2JqZWN0IiwiZW50cmllcyIsInNjYWxlZEFtb3VudCIsImNvbnZlcnRlZCIsInVuZGVmaW5lZCIsInNjYWxlZEFsdEFtb3VudCIsImNhbGN1bGF0ZUluZ3JlZGllbnRzIiwiZmxvdXJEaXNwbGF5Iiwid2F0ZXJEaXNwbGF5IiwieWVhc3REaXNwbGF5Iiwic2FsdERpc3BsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJ0b2dnbGVJbmdyZWRpZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==