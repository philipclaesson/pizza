(()=>{"use strict";const t={pizzas:6,ingredients:{flour:{amount:1e3,unit:"g",alternativeAmount:16.6,alternativeUnit:"dl"},water:{amount:7,unit:"dl",alternativeAmount:700,alternativeUnit:"g"},yeast:{amount:6,unit:"g",alternativeAmount:2.5,alternativeUnit:"ml"},salt:{amount:5,unit:"tsp",alternativeAmount:30,alternativeUnit:"g"}}},n={flour:!1,water:!1,yeast:!1,salt:!1};function e(t){return Math.round(2*t)/2}function a(t){return 10*Math.round(t/10)}function i(t,e){return n[e]&&t.alternativeAmount&&t.alternativeUnit?`${t.alternativeAmount} ${t.alternativeUnit}`:`${t.amount} ${t.unit}`}function o(){const n=document.getElementById("pizza-slider"),o=parseInt(n.value),u=document.getElementById("pizza-count");u&&(u.textContent=o.toString());const r=function(n){const i=n/t.pizzas,o={};for(const[n,r]of Object.entries(t.ingredients)){const t=r.amount*i;if("tsp"===r.unit){const a=(u=t)>=3?{amount:e(u/3),unit:"tbsp"}:{amount:e(u),unit:"tsp"};o[n]={amount:a.amount,unit:a.unit}}else o[n]=t>100?{amount:a(t),unit:r.unit}:t>10?{amount:Math.round(t),unit:r.unit}:{amount:e(t),unit:r.unit};if("alternativeAmount"in r&&"alternativeUnit"in r&&void 0!==r.alternativeAmount&&void 0!==r.alternativeUnit){const t=r.alternativeAmount*i;"g"===r.alternativeUnit?o[n].alternativeAmount=a(t):o[n].alternativeAmount=e(t),o[n].alternativeUnit=r.alternativeUnit}}var u;return{pizzas:n,ingredients:o}}(o),l=document.getElementById("flour-amount"),s=document.getElementById("water-amount"),d=document.getElementById("yeast-amount"),m=document.getElementById("salt-amount");l&&(l.textContent=i(r.ingredients.flour,"flour")),s&&(s.textContent=i(r.ingredients.water,"water")),d&&(d.textContent=i(r.ingredients.yeast,"yeast")),m&&(m.textContent=i(r.ingredients.salt,"salt"));const c=document.getElementById("pizza-count-label");c&&(c.textContent=1===o?"pizza":"pizze")}document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("pizza-slider");t&&(t.value="6",t.addEventListener("input",o),o(),document.querySelectorAll(".ingredient-item").forEach(((t,e)=>{const a=["flour","water","yeast","salt"][e];t.addEventListener("click",(()=>{!function(t){n[t]=!n[t],o()}(a)})),t.addEventListener("mouseenter",(()=>{t.classList.add("ingredient-hover")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("ingredient-hover")}))})))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVBdUMsSUFDRkEsRUFBYWYsWUFBY1YsRUFDekJZLEVBQU8zQixZQUFZTSxNQUNuQixVQUVBbUMsSUFDRkEsRUFBYWhCLFlBQWNWLEVBQ3pCWSxFQUFPM0IsWUFBWU8sTUFDbkIsVUFFQW1DLElBQ0ZBLEVBQVlqQixZQUFjVixFQUFpQlksRUFBTzNCLFlBQVlRLEtBQU0sU0FHdEUsTUFBTW1DLEVBQWtCdkIsU0FBU0MsZUFBZSxxQkFDNUNzQixJQUNGQSxFQUFnQmxCLFlBQTZCLElBQWZILEVBQW1CLFFBQVUsUUFFL0QsQ0EwQkFGLFNBQVN3QixpQkFBaUIsb0JBQW9CLEtBQzVDLE1BQU16QixFQUFTQyxTQUFTQyxlQUFlLGdCQUVuQ0YsSUFFRkEsRUFBT1IsTUFBUSxJQUdmUSxFQUFPeUIsaUJBQWlCLFFBQVMxQixHQUdqQ0EsSUFqQ3NCRSxTQUFTeUIsaUJBQWlCLG9CQUVsQ0MsU0FBUSxDQUFDQyxFQUFNQyxLQUM3QixNQUNNL0IsRUFEaUIsQ0FBQyxRQUFTLFFBQVMsUUFBUyxRQUNkK0IsR0FFckNELEVBQUtILGlCQUFpQixTQUFTLE1BMURuQyxTQUEwQjNCLEdBQ3hCUixFQUFzQlEsSUFBa0JSLEVBQXNCUSxHQUM5REMsR0FDRixDQXdETStCLENBQWlCaEMsRUFBYyxJQUlqQzhCLEVBQUtILGlCQUFpQixjQUFjLEtBQ2xDRyxFQUFLRyxVQUFVQyxJQUFJLG1CQUFtQixJQUd4Q0osRUFBS0gsaUJBQWlCLGNBQWMsS0FDbENHLEVBQUtHLFVBQVVFLE9BQU8sbUJBQW1CLEdBQ3pDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waXp6YS8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEJhc2UgcmVjaXBlIGZvciA2IHBpenphc1xuY29uc3QgQkFTRV9SRUNJUEUgPSB7XG4gIHBpenphczogNixcbiAgaW5ncmVkaWVudHM6IHtcbiAgICBmbG91cjoge1xuICAgICAgYW1vdW50OiAxMDAwLFxuICAgICAgdW5pdDogXCJnXCIsXG4gICAgICBhbHRlcm5hdGl2ZUFtb3VudDogMTYuNixcbiAgICAgIGFsdGVybmF0aXZlVW5pdDogXCJkbFwiLFxuICAgIH0sXG4gICAgd2F0ZXI6IHtcbiAgICAgIGFtb3VudDogNyxcbiAgICAgIHVuaXQ6IFwiZGxcIixcbiAgICAgIGFsdGVybmF0aXZlQW1vdW50OiA3MDAsXG4gICAgICBhbHRlcm5hdGl2ZVVuaXQ6IFwiZ1wiLFxuICAgIH0sXG4gICAgeWVhc3Q6IHtcbiAgICAgIGFtb3VudDogNixcbiAgICAgIHVuaXQ6IFwiZ1wiLFxuICAgICAgYWx0ZXJuYXRpdmVBbW91bnQ6IDIuNSxcbiAgICAgIGFsdGVybmF0aXZlVW5pdDogXCJtbFwiLFxuICAgIH0sXG4gICAgc2FsdDoge1xuICAgICAgYW1vdW50OiA1LFxuICAgICAgdW5pdDogXCJ0c3BcIixcbiAgICAgIGFsdGVybmF0aXZlQW1vdW50OiAzMCxcbiAgICAgIGFsdGVybmF0aXZlVW5pdDogXCJnXCIsXG4gICAgfSxcbiAgfSxcbn07XG5cbmludGVyZmFjZSBJbmdyZWRpZW50IHtcbiAgYW1vdW50OiBudW1iZXI7XG4gIHVuaXQ6IHN0cmluZztcbiAgYWx0ZXJuYXRpdmVBbW91bnQ/OiBudW1iZXI7XG4gIGFsdGVybmF0aXZlVW5pdD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJlY2lwZSB7XG4gIHBpenphczogbnVtYmVyO1xuICBpbmdyZWRpZW50czoge1xuICAgIFtrZXk6IHN0cmluZ106IEluZ3JlZGllbnQ7XG4gIH07XG59XG5cbi8vIFRyYWNrIHdoaWNoIGluZ3JlZGllbnRzIGFyZSBzaG93aW5nIGFsdGVybmF0aXZlIGFtb3VudHNcbmNvbnN0IGluZ3JlZGllbnRUb2dnbGVTdGF0ZTogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7XG4gIGZsb3VyOiBmYWxzZSxcbiAgd2F0ZXI6IGZhbHNlLFxuICB5ZWFzdDogZmFsc2UsXG4gIHNhbHQ6IGZhbHNlLFxufTtcblxuLy8gUm91bmQgdG8gbmVhcmVzdCAwLjVcbmZ1bmN0aW9uIHJvdW5kVG9OZWFyZXN0SGFsZih2YWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiAyKSAvIDI7XG59XG5cbmZ1bmN0aW9uIHJvdW5kVG9OZWFyZXN0MTAodmFsdWU6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlIC8gMTApICogMTA7XG59XG5cbi8vIENvbnZlcnQgdGVhc3Bvb25zIHRvIHRhYmxlc3Bvb25zIGlmID49IDMgdHNwXG5mdW5jdGlvbiBjb252ZXJ0VHNwVG9UYnNwKGFtb3VudDogbnVtYmVyKTogeyBhbW91bnQ6IG51bWJlcjsgdW5pdDogc3RyaW5nIH0ge1xuICBpZiAoYW1vdW50ID49IDMpIHtcbiAgICBjb25zdCB0YnNwID0gYW1vdW50IC8gMztcbiAgICByZXR1cm4geyBhbW91bnQ6IHJvdW5kVG9OZWFyZXN0SGFsZih0YnNwKSwgdW5pdDogXCJ0YnNwXCIgfTtcbiAgfVxuICByZXR1cm4geyBhbW91bnQ6IHJvdW5kVG9OZWFyZXN0SGFsZihhbW91bnQpLCB1bml0OiBcInRzcFwiIH07XG59XG5cbi8vIENhbGN1bGF0ZSBpbmdyZWRpZW50cyBmb3IgZGVzaXJlZCBudW1iZXIgb2YgcGl6emFzXG5mdW5jdGlvbiBjYWxjdWxhdGVJbmdyZWRpZW50cyh0YXJnZXRQaXp6YXM6IG51bWJlcik6IFJlY2lwZSB7XG4gIGNvbnN0IG11bHRpcGxpZXIgPSB0YXJnZXRQaXp6YXMgLyBCQVNFX1JFQ0lQRS5waXp6YXM7XG4gIGNvbnN0IGNhbGN1bGF0ZWRJbmdyZWRpZW50czogeyBba2V5OiBzdHJpbmddOiBJbmdyZWRpZW50IH0gPSB7fTtcblxuICBmb3IgKGNvbnN0IFtrZXksIGluZ3JlZGllbnRdIG9mIE9iamVjdC5lbnRyaWVzKEJBU0VfUkVDSVBFLmluZ3JlZGllbnRzKSkge1xuICAgIGNvbnN0IHNjYWxlZEFtb3VudCA9IGluZ3JlZGllbnQuYW1vdW50ICogbXVsdGlwbGllcjtcblxuICAgIGlmIChpbmdyZWRpZW50LnVuaXQgPT09IFwidHNwXCIpIHtcbiAgICAgIGNvbnN0IGNvbnZlcnRlZCA9IGNvbnZlcnRUc3BUb1Ric3Aoc2NhbGVkQW1vdW50KTtcbiAgICAgIGNhbGN1bGF0ZWRJbmdyZWRpZW50c1trZXldID0ge1xuICAgICAgICBhbW91bnQ6IGNvbnZlcnRlZC5hbW91bnQsXG4gICAgICAgIHVuaXQ6IGNvbnZlcnRlZC51bml0LFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHNjYWxlZEFtb3VudCA+IDEwMCkge1xuICAgICAgY2FsY3VsYXRlZEluZ3JlZGllbnRzW2tleV0gPSB7XG4gICAgICAgIGFtb3VudDogcm91bmRUb05lYXJlc3QxMChzY2FsZWRBbW91bnQpLFxuICAgICAgICB1bml0OiBpbmdyZWRpZW50LnVuaXQsXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoc2NhbGVkQW1vdW50ID4gMTApIHtcbiAgICAgIGNhbGN1bGF0ZWRJbmdyZWRpZW50c1trZXldID0ge1xuICAgICAgICBhbW91bnQ6IE1hdGgucm91bmQoc2NhbGVkQW1vdW50KSxcbiAgICAgICAgdW5pdDogaW5ncmVkaWVudC51bml0LFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsY3VsYXRlZEluZ3JlZGllbnRzW2tleV0gPSB7XG4gICAgICAgIGFtb3VudDogcm91bmRUb05lYXJlc3RIYWxmKHNjYWxlZEFtb3VudCksXG4gICAgICAgIHVuaXQ6IGluZ3JlZGllbnQudW5pdCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gUHJlc2VydmUgYWx0ZXJuYXRpdmUgbWVhc3VyZW1lbnRzIGlmIHRoZXkgZXhpc3RcbiAgICBpZiAoXG4gICAgICBcImFsdGVybmF0aXZlQW1vdW50XCIgaW4gaW5ncmVkaWVudCAmJlxuICAgICAgXCJhbHRlcm5hdGl2ZVVuaXRcIiBpbiBpbmdyZWRpZW50ICYmXG4gICAgICBpbmdyZWRpZW50LmFsdGVybmF0aXZlQW1vdW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIGluZ3JlZGllbnQuYWx0ZXJuYXRpdmVVbml0ICE9PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIGNvbnN0IHNjYWxlZEFsdEFtb3VudCA9IGluZ3JlZGllbnQuYWx0ZXJuYXRpdmVBbW91bnQgKiBtdWx0aXBsaWVyO1xuXG4gICAgICBpZiAoaW5ncmVkaWVudC5hbHRlcm5hdGl2ZVVuaXQgPT09IFwiZ1wiKSB7XG4gICAgICAgIGNhbGN1bGF0ZWRJbmdyZWRpZW50c1trZXldLmFsdGVybmF0aXZlQW1vdW50ID1cbiAgICAgICAgICByb3VuZFRvTmVhcmVzdDEwKHNjYWxlZEFsdEFtb3VudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxjdWxhdGVkSW5ncmVkaWVudHNba2V5XS5hbHRlcm5hdGl2ZUFtb3VudCA9XG4gICAgICAgICAgcm91bmRUb05lYXJlc3RIYWxmKHNjYWxlZEFsdEFtb3VudCk7XG4gICAgICB9XG4gICAgICBjYWxjdWxhdGVkSW5ncmVkaWVudHNba2V5XS5hbHRlcm5hdGl2ZVVuaXQgPSBpbmdyZWRpZW50LmFsdGVybmF0aXZlVW5pdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBpenphczogdGFyZ2V0UGl6emFzLFxuICAgIGluZ3JlZGllbnRzOiBjYWxjdWxhdGVkSW5ncmVkaWVudHMsXG4gIH07XG59XG5cbi8vIEZvcm1hdCBpbmdyZWRpZW50IGRpc3BsYXkgYmFzZWQgb24gdG9nZ2xlIHN0YXRlXG5mdW5jdGlvbiBmb3JtYXRJbmdyZWRpZW50KFxuICBpbmdyZWRpZW50OiBJbmdyZWRpZW50LFxuICBpbmdyZWRpZW50S2V5OiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IHNob3dBbHRlcm5hdGl2ZSA9IGluZ3JlZGllbnRUb2dnbGVTdGF0ZVtpbmdyZWRpZW50S2V5XTtcblxuICBpZiAoXG4gICAgc2hvd0FsdGVybmF0aXZlICYmXG4gICAgaW5ncmVkaWVudC5hbHRlcm5hdGl2ZUFtb3VudCAmJlxuICAgIGluZ3JlZGllbnQuYWx0ZXJuYXRpdmVVbml0XG4gICkge1xuICAgIHJldHVybiBgJHtpbmdyZWRpZW50LmFsdGVybmF0aXZlQW1vdW50fSAke2luZ3JlZGllbnQuYWx0ZXJuYXRpdmVVbml0fWA7XG4gIH1cblxuICByZXR1cm4gYCR7aW5ncmVkaWVudC5hbW91bnR9ICR7aW5ncmVkaWVudC51bml0fWA7XG59XG5cbi8vIFRvZ2dsZSBpbmdyZWRpZW50IGRpc3BsYXkgYmV0d2VlbiBtYWluIGFuZCBhbHRlcm5hdGl2ZSBhbW91bnRzXG5mdW5jdGlvbiB0b2dnbGVJbmdyZWRpZW50KGluZ3JlZGllbnRLZXk6IHN0cmluZyk6IHZvaWQge1xuICBpbmdyZWRpZW50VG9nZ2xlU3RhdGVbaW5ncmVkaWVudEtleV0gPSAhaW5ncmVkaWVudFRvZ2dsZVN0YXRlW2luZ3JlZGllbnRLZXldO1xuICB1cGRhdGVSZWNpcGVEaXNwbGF5KCk7XG59XG5cbi8vIFVwZGF0ZSB0aGUgcmVjaXBlIGRpc3BsYXlcbmZ1bmN0aW9uIHVwZGF0ZVJlY2lwZURpc3BsYXkoKTogdm9pZCB7XG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGl6emEtc2xpZGVyXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGNvbnN0IHBpenphQ291bnQgPSBwYXJzZUludChzbGlkZXIudmFsdWUpO1xuXG4gIC8vIFVwZGF0ZSBwaXp6YSBjb3VudCBkaXNwbGF5XG4gIGNvbnN0IGNvdW50RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGl6emEtY291bnRcIik7XG4gIGlmIChjb3VudERpc3BsYXkpIHtcbiAgICBjb3VudERpc3BsYXkudGV4dENvbnRlbnQgPSBwaXp6YUNvdW50LnRvU3RyaW5nKCk7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgbmV3IHJlY2lwZVxuICBjb25zdCByZWNpcGUgPSBjYWxjdWxhdGVJbmdyZWRpZW50cyhwaXp6YUNvdW50KTtcblxuICAvLyBVcGRhdGUgaW5ncmVkaWVudCBkaXNwbGF5c1xuICBjb25zdCBmbG91ckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZsb3VyLWFtb3VudFwiKTtcbiAgY29uc3Qgd2F0ZXJEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3YXRlci1hbW91bnRcIik7XG4gIGNvbnN0IHllYXN0RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwieWVhc3QtYW1vdW50XCIpO1xuICBjb25zdCBzYWx0RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsdC1hbW91bnRcIik7XG5cbiAgaWYgKGZsb3VyRGlzcGxheSlcbiAgICBmbG91ckRpc3BsYXkudGV4dENvbnRlbnQgPSBmb3JtYXRJbmdyZWRpZW50KFxuICAgICAgcmVjaXBlLmluZ3JlZGllbnRzLmZsb3VyLFxuICAgICAgXCJmbG91clwiXG4gICAgKTtcbiAgaWYgKHdhdGVyRGlzcGxheSlcbiAgICB3YXRlckRpc3BsYXkudGV4dENvbnRlbnQgPSBmb3JtYXRJbmdyZWRpZW50KFxuICAgICAgcmVjaXBlLmluZ3JlZGllbnRzLndhdGVyLFxuICAgICAgXCJ3YXRlclwiXG4gICAgKTtcbiAgaWYgKHllYXN0RGlzcGxheSlcbiAgICB5ZWFzdERpc3BsYXkudGV4dENvbnRlbnQgPSBmb3JtYXRJbmdyZWRpZW50KFxuICAgICAgcmVjaXBlLmluZ3JlZGllbnRzLnllYXN0LFxuICAgICAgXCJ5ZWFzdFwiXG4gICAgKTtcbiAgaWYgKHNhbHREaXNwbGF5KVxuICAgIHNhbHREaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0SW5ncmVkaWVudChyZWNpcGUuaW5ncmVkaWVudHMuc2FsdCwgXCJzYWx0XCIpO1xuXG4gIC8vIFVwZGF0ZSBwaXp6YSBjb3VudCBsYWJlbFxuICBjb25zdCBwaXp6YUNvdW50TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpenphLWNvdW50LWxhYmVsXCIpO1xuICBpZiAocGl6emFDb3VudExhYmVsKSB7XG4gICAgcGl6emFDb3VudExhYmVsLnRleHRDb250ZW50ID0gcGl6emFDb3VudCA9PT0gMSA/IFwicGl6emFcIiA6IFwicGl6emVcIjtcbiAgfVxufVxuXG4vLyBBZGQgY2xpY2sgaGFuZGxlcnMgZm9yIGluZ3JlZGllbnQgaXRlbXNcbmZ1bmN0aW9uIGFkZEluZ3JlZGllbnRDbGlja0hhbmRsZXJzKCk6IHZvaWQge1xuICBjb25zdCBpbmdyZWRpZW50SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmluZ3JlZGllbnQtaXRlbVwiKTtcblxuICBpbmdyZWRpZW50SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpbmdyZWRpZW50S2V5cyA9IFtcImZsb3VyXCIsIFwid2F0ZXJcIiwgXCJ5ZWFzdFwiLCBcInNhbHRcIl07XG4gICAgY29uc3QgaW5ncmVkaWVudEtleSA9IGluZ3JlZGllbnRLZXlzW2luZGV4XTtcblxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRvZ2dsZUluZ3JlZGllbnQoaW5ncmVkaWVudEtleSk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgdmlzdWFsIGZlZWRiYWNrXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJpbmdyZWRpZW50LWhvdmVyXCIpO1xuICAgIH0pO1xuXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmdyZWRpZW50LWhvdmVyXCIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gSW5pdGlhbGl6ZSB0aGUgY2FsY3VsYXRvclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpenphLXNsaWRlclwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gIGlmIChzbGlkZXIpIHtcbiAgICAvLyBTZXQgZGVmYXVsdCB2YWx1ZVxuICAgIHNsaWRlci52YWx1ZSA9IFwiNlwiO1xuXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIGZvciBzbGlkZXIgY2hhbmdlc1xuICAgIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdXBkYXRlUmVjaXBlRGlzcGxheSk7XG5cbiAgICAvLyBJbml0aWFsIGRpc3BsYXkgdXBkYXRlXG4gICAgdXBkYXRlUmVjaXBlRGlzcGxheSgpO1xuXG4gICAgLy8gQWRkIGNsaWNrIGhhbmRsZXJzIGZvciBpbmdyZWRpZW50c1xuICAgIGFkZEluZ3JlZGllbnRDbGlja0hhbmRsZXJzKCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbIkJBU0VfUkVDSVBFIiwicGl6emFzIiwiaW5ncmVkaWVudHMiLCJmbG91ciIsImFtb3VudCIsInVuaXQiLCJhbHRlcm5hdGl2ZUFtb3VudCIsImFsdGVybmF0aXZlVW5pdCIsIndhdGVyIiwieWVhc3QiLCJzYWx0IiwiaW5ncmVkaWVudFRvZ2dsZVN0YXRlIiwicm91bmRUb05lYXJlc3RIYWxmIiwidmFsdWUiLCJNYXRoIiwicm91bmQiLCJyb3VuZFRvTmVhcmVzdDEwIiwiZm9ybWF0SW5ncmVkaWVudCIsImluZ3JlZGllbnQiLCJpbmdyZWRpZW50S2V5IiwidXBkYXRlUmVjaXBlRGlzcGxheSIsInNsaWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwaXp6YUNvdW50IiwicGFyc2VJbnQiLCJjb3VudERpc3BsYXkiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwicmVjaXBlIiwidGFyZ2V0UGl6emFzIiwibXVsdGlwbGllciIsImNhbGN1bGF0ZWRJbmdyZWRpZW50cyIsImtleSIsIk9iamVjdCIsImVudHJpZXMiLCJzY2FsZWRBbW91bnQiLCJjb252ZXJ0ZWQiLCJ1bmRlZmluZWQiLCJzY2FsZWRBbHRBbW91bnQiLCJjYWxjdWxhdGVJbmdyZWRpZW50cyIsImZsb3VyRGlzcGxheSIsIndhdGVyRGlzcGxheSIsInllYXN0RGlzcGxheSIsInNhbHREaXNwbGF5IiwicGl6emFDb3VudExhYmVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwidG9nZ2xlSW5ncmVkaWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSJdLCJzb3VyY2VSb290IjoiIn0=